var register = function(){
	
	var basePath="/indrasol";
	
	
	var _init= function(){
		console.log(": init::");
		$("#submit_id").click(function(e) {
			//e.preventDefault();
//			var form = $(this).closest("form");
			var form = $("form").get(0);
		
			_submitForm(form);
	//		return false;
		});
	};
	var _submitForm = function(form) {
//		var _url = basePath+"/emailcheck";
		var _url = basePath+"/emailcheck";
		console.log(":: form username ::"+ $(form));
		console.log(JSON.stringify($(form)));
		var firstName = $(form).find("#firstname").val();
		var lastName = $(form).find("#lastname").val();
		var email= $(form).find("#emailId").val();
		var companyName= $(form).find("#companyname").val();
		var contact = $(form).find("#contact").val();
		var country = $(form).find("#country").val();
		if(firstName ==null || firstName == ''){
			alert("First Name is required.");
			$(form).find("#firstname").focus();
			return ;
		}
		if(lastName ==null || lastName == ''){
			alert("Last Name is required.");
			$(form).find("#lastname").focus();
			return ;
		}
		if(email ==null || email == ''){
			alert("Email is required.");
			$(form).find("#emailId").focus();
			return ;
		}
		if(companyName ==null || companyName == ''){
			alert("Company Name is required.");
			$(form).find("#companyname").focus();
			return ;
		}
		console.log(companyName);
		console.log(firstName);
		console.log(lastName);
		console.log(email);
		console.log(companyName);
		console.log(contact);
		console.log(country);
		var data = {"firstName":firstName,"lastName":lastName,"companyName":companyName,"email": email,"contact":contact,"country":country}
	    console.log(JSON.stringify(data));

		$.ajax({
			type : "POST",
//			url : _url+"?tenantname="+tenantName+"&username="+username+"&password="+password+"&url="+url,
			url : _url,
			data : JSON.stringify(data), 
			dataType: 'json',
			contentType:'application/json; charset=utf-8',
			processData: false,
			success : function(data){
					window.location.href = "/thankyou";
//				if(data.msg === "success"){					
//					window.location.href = "/thankyou";
//				}
//				else {
//					alert("Already Registered!!!");
//				}
			}
		});
	};

	return {
		init: _init,
	}
}();


var connection = function(){
	
	var basePath="/indrasol";	
	var _link= function(){
		console.log(": init::");
		$("#connection_id").click(function(e) {
			//e.preventDefault();
//			var form = $(this).closest("form");
			var form = $("form").get(0);
		
			_formSubmit(form);
	//		return false;
		});
	};
	var _formSubmit = function(form) {
//		var _url = basePath+"/emailcheck";
		var _url = basePath+"/test";
		console.log(JSON.stringify($(form)));
		console.log($(form).find("#admin_email").val());
		console.log($(form).find("#client_id").val());
		console.log($(form).find("#instance_username").val());
		console.log($(form).find("#nstance_url").val());
		var email= $(form).find("#admin_email").val();
		var clientId= $(form).find("#client_id").val();
		var username = $(form).find("#usernameId").val();
		var url = $(form).find("#urlId").val();
		var password = $(form).find("#instance_pwd").val();
		console.log(email);
		console.log(username);
		console.log(password);
		console.log(clientId);
		console.log(url);
		var data = {"email": email,"clientId":clientId,"username":username,"password":password,"url":url}
	    console.log(JSON.stringify(data));

		$.ajax({
			type : "POST",
//			url : _url+"?tenantname="+tenantName+"&username="+username+"&password="+password+"&url="+url,
			url : _url,
			data : JSON.stringify(data), 
			dataType: 'json',
			contentType:'application/json; charset=utf-8',
			processData: false,
			success : function(data){
					window.location.href = "/thankyou";
//				if(data.msg === "success"){					
//					window.location.href = "/thankyou";
//				}
//				else {
//					alert("Already Registered!!!");
//				}
			}
		});
	};

	return {
		link: _link,
	}
}();

var admin = function(){
	
	var basePath="/indrasol";
	var _login= function(){
		console.log(": init::");
		$("#login_id").click(function(e) {
			var form = $("form").get(0);
		
			_loginFormSubmit(form);
		});
	};
	var _loginFormSubmit = function(form) {
		var _url = basePath+"/login";
		console.log(JSON.stringify($(form)));
		console.log($(form).find("#login_username").val());
		console.log($(form).find("#login_pwd").val());
		var username = $(form).find("#login_username").val();
		var password = $(form).find("#login_pwd").val();
		console.log(username);
		console.log(password);
		var data = {"username":username,"password":password}
	    console.log(JSON.stringify(data));

		$.ajax({
			type : "POST",
			url : _url,
			data : JSON.stringify(data), 
			dataType: 'json',
			contentType:'application/json; charset=utf-8',
			processData: false,
			success : function(data){
					if(data.msg === "success"){
						$('#adminlogin').attr('class','hidden');
						$('#adminadd').attr('class','visible');
					}
					else {
						alert("Login failed!!!");
					}
			}
		});
	};

	return {
		login: _login,
	}
}();


var home = function(){
	var _firstpage= function(){
		console.log(": return::");
		$("#okay_id").click(function(e){
			window.location.href = "/";
		});
	};
	return {
		firstpage: _firstpage,
	}	
}();


var credentials = function(){
	var basePath="/indrasol";
	var _add= function(){
		console.log(": init::");
		$("#addcred_id").click(function(e) {
			var form = $("form").get(0);	
			_addFormSubmit(form);
		});
	};
	var _addFormSubmit = function(form) {
		var _url = basePath+"/addAdmin";
		console.log(JSON.stringify($(form)));
		console.log($(form).find("#new_username").val());
		console.log($(form).find("#new_pwd").val());
		var username = $(form).find("#new_username").val();
		var password = $(form).find("#new_pwd").val();
		console.log(username);
		console.log(password);
		var data = {"username":username,"password":password}
	    console.log(JSON.stringify(data));

		$.ajax({
			type : "POST",
			url : _url,
			data : JSON.stringify(data), 
			dataType: 'json',
			contentType:'application/json; charset=utf-8',
			processData: false,
			success : function(data){
					if(data.msg === "success"){
						window.location.href = "/adminlogin";
//						$('#adminlogin').attr('class','hidden');
//						$('#adminadd').attr('class','visible');
					}
					else {
						alert("Adding failed!!!");
					}
			}
		});
	};
	return {
		add: _add,
	}	
}();

